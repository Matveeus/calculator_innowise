(()=>{"use strict";function e(){document.querySelector(".body").classList.toggle("day-theme")}document.getElementById("switch-theme-button").addEventListener("click",e);const t=document.getElementById("show-operations");function u(){const e=document.querySelector(".calculator-container"),u=document.querySelector(".zero");e.classList.toggle("pro"),u.classList.toggle("no-radius"),"More"===t.innerText?t.innerText="Close":t.innerText="More"}function r(e){if(e>=1e9||e<=-1e9||e>=-1e-9&&e<=1e-9&&0!==e){return e.toExponential(5).replace(/(\.\d*?)0+e/,"$1e").replace(/\.e/,"e")}const t=e.toFixed(8);return Number.isInteger(parseFloat(t))?parseFloat(t):parseFloat(t.toString().replace(/(\.\d*?)0+$/,"$1"))}function n(...e){for(const t of e)if(isNaN(t))return!1;return!0}t.addEventListener("click",u);const l=document.getElementById("output");function a(e,t){let u=1;for(let r=0;r<t;r+=1)u*=e;return u}function c(e){if(!n(e.currentValue,l.value))return;const t=l.value;switch(e.currentOperator){case"+":l.value=r(Number(e.currentValue)+Number(l.value));break;case"-":l.value=r(0===e.equalCounter?Number(e.currentValue)-Number(l.value):Number(l.value)-Number(e.currentValue));break;case"*":l.value=r(Number(e.currentValue)*Number(l.value));break;case"/":0===Number(l.value)?l.value="Error":l.value=r(0===e.equalCounter?Number(e.currentValue)/Number(l.value):Number(l.value)/Number(e.currentValue));break;case"exponentiation":l.value=r(0===e.equalCounter?Number(e.currentValue)**Number(l.value):Number(l.value)**Number(e.currentValue));break;case"y_root":{const t=0===e.equalCounter?e.currentValue:l.value,u=0===e.equalCounter?l.value:e.currentValue;l.value=r(function(e,t){let u=e;for(;(e-a(u,t))*(e-a(u,t))>1e-8;)u=((t-1)*u+e/a(u,t-1))/t;return u}(t,u));break}default:return}0===e.equalCounter&&(e.currentValue=t)}function o(){n(l.value)&&(l.value=-1*Number(l.value))}function m(e){document.querySelectorAll(".key-operator").forEach((t=>{t.addEventListener("click",(()=>{!function(e,t){const u=document.getElementById("output");if(!0===t.operatorActive)return t.currentValue=u.value,void(t.currentOperator=e);""!==t.currentOperator&&c(t),t.operatorActive=!0,t.currentValue=u.value,t.currentOperator=e,t.newNumber=!0}(t.value,e),e.equalCounter=0}))}));document.getElementById("clear").addEventListener("click",(()=>{!function(e){e.currentOperator="",e.currentValue=0,l.value=0}(e),e.equalCounter=0}));document.getElementById("switch_sign").addEventListener("click",o);document.getElementById("equal").addEventListener("click",(()=>{!function(e){c(e),e.operatorActive=!0,e.newNumber=!0,e.equalCounter+=1}(e)}));document.getElementById("percent").addEventListener("click",(()=>{!function(e){n(e.currentValue,l.value)&&(""===e.currentOperator?l.value/=100:l.value=Number(e.currentValue)*Number(l.value)/100)}(e),e.equalCounter=0}));document.getElementById("memory_add").addEventListener("click",(()=>{!function(e){e.memoryValue+=Number(l.value)}(e)}));document.getElementById("memory_subtract").addEventListener("click",(()=>{!function(e){e.memoryValue-=Number(l.value)}(e)}));document.getElementById("memory_clear").addEventListener("click",(()=>{!function(e){e.memoryValue=0}(e)}));document.getElementById("memory_recall").addEventListener("click",(()=>{!function(e){l.value=e.memoryValue}(e)}));document.getElementById("square").addEventListener("click",(()=>{l.value=Number(l.value)**2}));document.getElementById("cube").addEventListener("click",(()=>{l.value=Number(l.value)**3}));document.getElementById("e_to_power").addEventListener("click",(()=>{l.value=2.7182818011463845**Number(l.value)}));document.getElementById("10_to_power").addEventListener("click",(()=>{l.value=10**Number(l.value)}));document.getElementById("one_x-th").addEventListener("click",(()=>{0===Number(l.value)?l.value="Error":l.value=1/Number(l.value)}));document.getElementById("square_root").addEventListener("click",(()=>{!function(){if(Number(l.value)<0)l.value="Error";else if(0===Number(l.value))l.value=0;else{let e,t=Number(l.value)/2;do{e=t,t=(e+Number(l.value)/e)/2}while(e!==t);l.value=e}}()}));document.getElementById("cube_root").addEventListener("click",(()=>{!function(){if(0===Number(l.value))l.value=0;else{let e,t=Number(l.value)/2;do{e=t,t=(Number(l.value)/(t*t)+2*t)/3}while(e!==t);l.value=e}}()}));document.getElementById("factorial").addEventListener("click",(()=>{!function(){if(Number(l.value)<0)l.value="Error";else if(0===Number(l.value))l.value=1;else for(let e=Number(l.value)-1;e>0;e-=1)l.value=Number(l.value)*e}()}));document.getElementById("pi").addEventListener("click",(()=>{l.value=3.14159265359}));document.getElementById("e").addEventListener("click",(()=>{l.value=2.71828182846}))}function i(e,t){!function(e,t){const u=document.getElementById("output"),r=u.value;"."!==t.trim()?"0"!==r&&!0!==e.newNumber?r.toString().length<=e.maxOutputLength&&(u.value+=t):u.value=t:!0===e.newNumber?u.value=0+t:r.includes(".")||(u.value+=t)}(t,e),t.newNumber=!1,t.operatorActive=!1,t.equalCounter>0&&(t.currentValue=0,t.equalCounter=0)}class d{constructor(e,t,u,r,n,l,a){this.currentOperator=e,this.currentValue=t,this.operatorActive=u,this.newNumber=r,this.maxOutputLength=n,this.equalCounter=l,this.memoryValue=a,this.history=[]}}document.addEventListener("DOMContentLoaded",(()=>{const t=new d("",0,!1,!0,14,0,0);m(t),function(e){document.querySelectorAll(".key-number").forEach((t=>{t.addEventListener("click",(t=>{i(t.target.value,e)}))}))}(t),e(),u()}))})();