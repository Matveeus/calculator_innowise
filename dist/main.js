(()=>{"use strict";function e(){document.querySelector(".body").classList.toggle("day-theme")}function t(){const e=document.querySelector(".calculator-container"),t=document.querySelector(".zero");e.classList.toggle("pro"),t.classList.toggle("no-radius"),"More"===u.innerText?u.innerText="Close":u.innerText="More"}document.getElementById("switch-theme-button").addEventListener("click",e);const u=document.getElementById("show-operations");function r(e,t=5){const u=e.toString(),r=u.indexOf(".");return 0===t||-1===r||0===Number(u.split(".")[1])?u.split(".")[0]:u.substring(0,r+t+1)}function n(e,t=14,u=4){return e.toString().length>=t?r(e=e.toExponential(2),u):r(+(e=e.toFixed(t)),u)}function o(...e){for(const t of e)if(isNaN(t))return!1;return!0}function c(e){const t=document.getElementById("output");if(!o(e.currentValue,t.value))return;const u=t.value;switch(e.currentOperator){case"+":t.value=n(Number(e.currentValue)+Number(t.value));break;case"-":t.value=n(0===e.equalCounter?Number(e.currentValue)-Number(t.value):Number(t.value)-Number(e.currentValue));break;case"*":t.value=n(Number(e.currentValue)*Number(t.value));break;case"/":0===Number(t.value)?t.value="Error":t.value=n(0===e.equalCounter?Number(e.currentValue)/Number(t.value):Number(t.value)/Number(e.currentValue));break;default:return}0===e.equalCounter&&(e.currentValue=u)}function a(){const e=document.getElementById("output");o(e.value)&&(e.value=-1*Number(e.value))}function l(e){document.querySelectorAll(".key-operator").forEach((t=>{t.addEventListener("click",(t=>{!function(e,t){const u=document.getElementById("output");if(!0===t.operatorActive)return t.currentOperator=e,void(t.currentValue=u.value);""!==t.currentOperator&&c(t),t.operatorActive=!0,t.currentValue=u.value,t.currentOperator=e,t.newNumber=!0}(t.target.value,e),e.equalCounter=0}))}));document.getElementById("clear").addEventListener("click",(()=>{!function(e){const t=document.getElementById("output");e.currentOperator="",e.currentValue=0,t.value=0}(e),e.equalCounter=0}));document.getElementById("switch_sign").addEventListener("click",a);document.getElementById("equal").addEventListener("click",(()=>{!function(e){c(e),e.operatorActive=!0,e.newNumber=!0,e.equalCounter+=1}(e)}));document.getElementById("percent").addEventListener("click",(()=>{!function(e){const t=document.getElementById("output");o(e.currentValue,t.value)&&(""===e.currentOperator?t.value/=100:t.value=Number(e.currentValue)*Number(t.value)/100)}(e),e.equalCounter=0}))}function i(e,t){!function(e,t){const u=document.getElementById("output"),r=u.value;"."!==t.trim()?"0"!==r&&!0!==e.newNumber?r.toString().length<=e.maxOutputLength&&(u.value+=t):u.value=t:!0===e.newNumber?u.value=0+t:r.includes(".")||(u.value+=t)}(t,e),t.newNumber=!1,t.operatorActive=!1,t.equalCounter>0&&(t.currentValue=0,t.equalCounter=0,t.currentOperator="")}u.addEventListener("click",t);class m{constructor(e,t,u,r,n,o){this.currentOperator=e,this.currentValue=t,this.operatorActive=u,this.newNumber=r,this.maxOutputLength=n,this.equalCounter=o}}document.addEventListener("DOMContentLoaded",(()=>{const u=new m("",0,!1,!0,14,0);l(u),function(e){document.querySelectorAll(".key-number").forEach((t=>{t.addEventListener("click",(t=>{i(t.target.value,e)}))}))}(u),e(),t()}))})();